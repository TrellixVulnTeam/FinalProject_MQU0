<br>
<br>
<br>
<br>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<section id="page-banner" class="pt-105 pb-110 bg_cover" data-overlay="8" style="background-image: url(../../../assets/image/slider.jpg)">
  <div class="container">
      <div class="row">
          <div class="col-lg-12">
              <div class="page-banner-cont">
                  <h2>Welcome  Jasser</h2>
                  <nav aria-label="breadcrumb">
                      <ol class="breadcrumb">
                          <li class="breadcrumb-item"><a href="#">Trainee</a></li>
                          <li class="breadcrumb-item"><a href="#">Client</a></li>
                          <li class="breadcrumb-item active" aria-current="page">Purchase History</li>
                      </ol>
                  </nav>
              </div>  <!-- page banner cont -->
          </div>
      </div> <!-- row -->
  </div> <!-- container -->

</section>
<!--=================My Purches History Part ====================-->
<section id="corses-singel" class="pt-90  gray-bg">
  <div class="container">
      <div class="row">
          <div class="col-lg-9">
              <div class="corses-singel-left mt-30">
                  <div class="title">
                      <h3>Purchase Management</h3>
                  </div> <!-- title -->

                  <mat-tab-group>
                    <mat-tab>
                      <ng-template mat-tab-label>
                        <mat-icon>credit_card</mat-icon>
                        My Purches
                      </ng-template>
                      <div class="container mb-4">
                          <div class="row">
                              <div class="col-12">
                                  <div class="table-responsive">
                                      <table class="table table-striped">
                                          <thead>
                                              <tr>

                                                  <th scope="col">Course</th>
                                                  <th scope="col">Purches In</th>
                                                  <th scope="col" class="text-right">Price</th>
                                                  <th> </th>
                                              </tr>
                                          </thead>
                                          <tbody>
                                              <tr *ngFor="let record of this.purchesService.myPurshes">

                                                  <td>{{this.record.courseName}}</td>
                                                  <td>{{this.record.creationDate}}</td>

                                                  <td class="text-right">{{this.record.coursePrice}}</td>
                                                  <td class="text-right"><button class="btn btn-sm btn-danger">
                                                    <i class="fa fa-window-close"></i> </button> </td>
                                              </tr>
                                          </tbody>
                                      </table>
                                  </div>
                              </div>
                          </div>
                      </div>

                    </mat-tab>

                    <mat-tab>
                      <ng-template mat-tab-label>
                        <mat-icon>undo</mat-icon>
                        Course Refund
                      </ng-template>
                      <div class="container mb-4">
                        <div class="row">
                            <div class="col-12">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th scope="col"> </th>
                                                <th scope="col">Course Name</th>
                                                <th scope="col">Pusches In</th>
                                                <th scope="col">Status</th>
                                                <th scope="col" class="text-right">Price</th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let ref of this.purchesService.myRefunds">
                                                <td><img src="{{ref.image}}" width="70" height="70"/> </td>
                                                <td>{{ref.courseName}}</td>
                                                <td>{{ref.creationDate}}</td>
                                                <td>{{ref.isApproved}}</td>
                                                <td class="text-right">{{ref.coursePrice}}</td>

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    </mat-tab>
                    <mat-tab>
                      <ng-template mat-tab-label>
                        <mat-icon>shopping_cart</mat-icon>
                        Cart
                      </ng-template>
                      <div class="container mb-4">
                        <div class="row">
                            <div class="col-12">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr >
                                                <th scope="col"> </th>
                                                <th scope="col">Product</th>
                                                <th scope="col" class="text-right">Price</th>
                                                <th> </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let item of traineeService.cartItem">
                                                <td><img src="{{item.image}}" width="70" height="70"/> </td>
                                                <td>{{item.courseName}}</td>


                                                <td class="text-right">{{item.coursePrice}}</td>
                                                <td class="text-right">
                                                <button  class="btn btn-sm btn-danger"
                                                (click)="DeleteCartItem(item.cartItemId)"
                                                >
                                                <i class="fa fa-window-close"></i> </button> </td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>
                            </div>
                        </div>
                        <div class="row">
                             <h5 style="margin-left: 50px;">Total Price = <span>{{this.traineeService.totalPrice}}$</span></h5>
                             <!-- <div class="col-md-4 mb-3">
                                <button  class="btn btn-primary btn-block"> $20</button>
                              </div> -->
                             <button (click)="checkout(this.traineeService.totalPrice)" class="main-btn" style="margin-top: 25px; margin-left: 70px;">Check Out</button>
                        </div>
                    </div>
                    </mat-tab>
                    <mat-tab>
                      <ng-template mat-tab-label>
                        <mat-icon>favorite_border</mat-icon>
                        WishList
                      </ng-template>
                          <div class="container mb-4">
                          <div class="row">
                              <div class="col-12">
                                  <div class="table-responsive">
                                      <table class="table table-striped">
                                          <thead>
                                              <tr>
                                                  <th scope="col"></th>
                                                  <th scope="col">Course Name</th>
                                                  <th scope="col" class="text-right">Price</th>
                                                  <th>Add To Cart</th>
                                                  <th>Remove</th>
                                              </tr>
                                          </thead>
                                          <tbody>
                                              <tr  *ngFor="let item of traineeService.wishList">
                                                  <td><img src="{{item.courseImage}}" width="70" height="70"/> </td>
                                                  <td>{{item.courseName}}</td>


                                                  <td class="text-right">{{item.courseId}}</td>
                                                  <td class="text-center"><button class="btn btn-sm btn-danger"
                                                    (click)="AddToCart(item.courseId)">
                                                    <i class="fa fa-cart-plus"></i>
                                                    </button>
                                                  </td>
                                                    <td class="text-center">
                                                      <button class="btn btn-sm btn-danger" [value]="item.courseId"
                                                      (click)="DeleteWishListItem(item.courseId)"
                                                      >

                                                      <i class="fa fa-window-close"></i></button> </td>
                                              </tr>
                                          </tbody>
                                      </table>
                                  </div>
                              </div>
                          </div>
                      </div>
                    </mat-tab>
                  </mat-tab-group>

              </div> <!-- corses singel left -->

          </div>
          <div class="col-lg-3">
            <div class="container">
              <div class="row">
                  <div class="col-lg-12 col-sm-12" style="margin-top: 11px;">
                      <div class="card-box bg-blue">
                          <div class="inner">
                              <h3> {{this.purchesService.purchesCount}} </h3>
                              <p> Course was purchased</p>
                          </div>
                          <div class="icon">
                            <i class="fa fa-cart-plus"></i>
                          </div>

                      </div>
                  </div>

                  <div class="col-lg-12 col-sm-12">
                      <div class="card-box bg-green">
                          <div class="inner">
                              <h3> ${{this.purchesService.purchesAmount}}</h3>
                              <p> Total Spent </p>
                          </div>
                          <div class="icon">
                              <i class="fa fa-money" aria-hidden="true"></i>
                          </div>

                      </div>
                  </div>
                  <div class="col-lg-12 col-sm-12">
                      <div class="card-box bg-orange">
                          <div class="inner">
                              <h3> {{this.traineeService.cartItemCount}} </h3>
                              <p> In Cart </p>
                          </div>
                          <div class="icon">
                            <i class="fa fa-cart-plus"></i>
                          </div>

                      </div>
                  </div>
                  <div class="col-lg-12 col-sm-12">
                      <div class="card-box bg-red">
                          <div class="inner">
                              <h3> {{this.traineeService.wishListItemCount}} </h3>
                              <p> In Wish List </p>
                          </div>
                          <div class="icon">
                            <i class="fa fa-heart"></i>
                          </div>

                      </div>
                  </div>
              </div>
          </div>
          </div>
      </div> <!-- row -->
  </div> <!-- container -->
</section>
